<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="admin/fragments/head :: head">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">


</head>

<body>
	<div class="wrapper">
		<!-- Sidebar -->
		<div th:replace="admin/fragments/sidebar :: sidebar"></div>
		<!-- End Sidebar -->

		<div class="main-panel">
			<!-- Header -->
			<div th:replace="admin/fragments/header :: header"></div>
			<!-- End Header -->

			<div class="container" style="background-color: #fafcff;">
				<div class="container">


					<div class="d-flex justify-content-start gap-3 mt-4" style="margin: 0px 30px;">
						<!-- N√∫t Quay L·∫°i -->
						<a th:href="@{/admin/hoadon}" class="btn btn-secondary">
							<i class="fas fa-arrow-left"></i> Quay L·∫°i
						</a>

						<!-- N√∫t Xu·∫•t PDF -->
						<a th:href="@{/admin/hoadon/export/{id}(id=${hoaDon.maHoaDon})}" class="btn btn-danger">
							<i class="fas fa-file-pdf"></i> Xu·∫•t PDF
						</a>

						<!-- N√∫t X√°c Nh·∫≠n Thanh To√°n -->
						<div th:if="${hoaDon.trangThaiThanhToan == 'Ch∆∞a x√°c nh·∫≠n'}">
							<form th:action="@{/admin/hoadon/xacnhan/{maHoaDon}(maHoaDon=${hoaDon.maHoaDon})}"
								method="post">
								<button type="submit" class="btn btn-success">
									<i class="fas fa-check"></i> X√°c nh·∫≠n thanh to√°n
								</button>
							</form>
						</div>
					</div>





				</div>



				<div th:if="${errorMessage}" class="alert alert-danger" role="alert">
					<span th:text="${errorMessage}"></span>
				</div>

				<!-- Th√¥ng tin h√≥a ƒë∆°n -->
				<!-- Th√¥ng tin h√≥a ƒë∆°n -->
				<div class="details-container"
					style="margin-left: 30px;margin-right: 30px;background-color: #ffff; border-radius: 12px; padding: 20px 40px 40px 40px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);">

					<h3 class="fw-bold text-center mb-4">Chi Ti·∫øt H√≥a ƒê∆°n</h3>

					<!-- Hi·ªÉn th·ªã th√¥ng tin h√≥a ƒë∆°n -->
					<div class="details-header">
						<div class="column">
							<p><strong>Ng∆∞·ªùi Nh·∫≠n:</strong>
								<span
									th:text="${hoaDon.soDienThoaiNhanHang != '0000000000' ? hoaDon.donHang.nguoiDung.hoTen : 'Kh√°ch v√£ng lai'}"></span>
							</p>
							<!-- üöÄ N·∫øu c√≥ ƒë·ªãa ch·ªâ giao h√†ng th√¨ hi·ªÉn th·ªã "ƒê·ªãa Ch·ªâ:", n·∫øu kh√¥ng th√¨ ch·ªâ hi·ªÉn th·ªã "Mua t·∫°i qu·∫ßy KN" -->
							<p th:if="${hoaDon.diaChiGiaoHang != null}">
								<strong>ƒê·ªãa Ch·ªâ:</strong> <span th:text="${hoaDon.diaChiGiaoHang}"></span>
							</p>
							<p th:if="${hoaDon.diaChiGiaoHang == null}">Mua t·∫°i qu·∫ßy KN</p>
							<!-- üöÄ N·∫øu mua t·∫°i qu·∫ßy th√¨ ·∫©n s·ªë ƒëi·ªán tho·∫°i -->
							<p th:if="${hoaDon.tenNguoiNhan != 'Kh√°ch v√£ng lai'}">
								<strong>S·ªë ƒêi·ªán Tho·∫°i:</strong> <span th:text="${hoaDon.soDienThoaiNhanHang}"></span>
							</p>


							<!--<p><strong>S·ªë ƒêi·ªán Tho·∫°i:</strong> <span th:text="${hoaDon.soDienThoaiNhanHang}"></span>
							</p>-->

							<!--	<p><strong>Tr·∫°ng Th√°i Thanh To√°n:</strong>
									<span th:text="${formattedTrangThaiThanhToan}"
										th:classappend="${formattedTrangThaiThanhToan == 'ƒê√£ thanh to√°n' ? 'text-success' : 'text-danger'}">
									</span>
								</p>-->
							<p><strong>Tr·∫°ng Th√°i Thanh To√°n:</strong>
								<span th:text="${formattedTrangThaiThanhToan}"
									th:classappend="${formattedTrangThaiThanhToan == 'ƒê√£ thanh to√°n' ? 'text-success' : 'text-danger'}">
								</span>
								<!-- Th√™m bi·ªÉu t∆∞·ª£ng t∆∞∆°ng ·ª©ng v·ªõi tr·∫°ng th√°i -->
								<i
									th:classappend="${formattedTrangThaiThanhToan == 'ƒê√£ thanh to√°n' ? 'fa fa-check-circle text-success' : 'fa fa-times-circle text-danger'}"></i>
							</p>


						</div>
						<div class="column">
							<p><strong>M√£ H√≥a ƒê∆°n:</strong> <span th:text="${hoaDon.maHoaDon}"></span></p>
							<p><strong>Ng√†y Xu·∫•t:</strong> <span th:text="${formattedNgayXuat}"></span></p>
							<p><strong>T·ªïng Gi√° Tr·ªã S·∫£n Ph·∫©m:</strong>
								<span class="fw-bold text-primary" th:text="${formattedTongGiaTriSanPham}"></span>
							</p>
							<p><strong>Ph√≠ V·∫≠n Chuy·ªÉn:</strong>
								<span class="fw-bold text-danger" th:text="${formattedPhiVanChuyen}"></span>
							</p>
							<p><strong>T·ªïng Gi√° Tr·ªã ƒê∆°n H√†ng:</strong>
								<span class="fw-bold text-success" th:text="${formattedTongGiaTriDonHang}"></span>
							</p>
							<p><strong>T·ªïng Ti·ªÅn:</strong> <span th:text="${formattedTongTien}"></span></p>

						</div>

					</div>

					<style>
						.details-header {
							display: flex;
							justify-content: space-between;
							align-items: flex-start;
							margin-bottom: 20px;
						}

						.details-header .column {
							width: 48%;
						}
					</style>

					<!-- B·∫£ng chi ti·∫øt s·∫£n ph·∫©m trong h√≥a ƒë∆°n -->
					<h5 class="mt-3">Danh S√°ch S·∫£n Ph·∫©m Trong H√≥a ƒê∆°n</h5>
					<table class="table table-bordered mt-4">
						<thead class="thead-dark">
							<tr>
								<th>M√£ S·∫£n Ph·∫©m</th>
								<th>H√¨nh ·∫¢nh</th>
								<th>T√™n S·∫£n Ph·∫©m</th>
								<th>S·ªë L∆∞·ª£ng</th>
								<th>Gi√° T·∫°i Th·ªùi ƒêi·ªÉm ƒê·∫∑t</th>
								<th>Th√†nh Ti·ªÅn</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="chiTiet : ${formattedChiTietDonHang}" style="text-align: center;">
								<td th:text="${chiTiet['maSanPham']}"></td>
								<td>
									<img th:src="@{'/upload/' + ${chiTiet['hinhAnh']}}"
										style="width: 100px; height: auto;" alt="·∫¢nh s·∫£n ph·∫©m" />
								</td>
								<td th:text="${chiTiet['tenSanPham']}"></td>
								<td th:text="${chiTiet['soLuong']}"></td>
								<td th:text="${chiTiet['giaTaiThoiDiemDat']}"></td>
								<td th:text="${chiTiet['thanhTien']}"></td>
							</tr>
						</tbody>
					</table>


				</div>

				<style>
					.details-container {
						font-family: Arial, sans-serif;
						line-height: 1.6;
						margin-bottom: 30px;
					}

					.details-container h3 {
						text-align: center;
						margin-bottom: 20px;
					}

					.details-container p {
						margin: 10px 0;
						padding-left: 15px;
					}

					/* Ch·ªânh l·∫°i cƒÉn ch·ªânh ti√™u ƒë·ªÅ c·ªôt */
					.details-header .column {
						width: 48%;
						padding-left: 10px;
						/* ƒêi·ªÅu ch·ªânh kho·∫£ng c√°ch t·ª´ vi·ªÅn tr√°i */
					}

					.table th,
					.table td {
						text-align: center;
					}

					.table th {
						background-color: #f1f1f1;
						font-weight: bold;
					}

					.table td {
						vertical-align: middle;
					}
				</style>


			</div>
		</div>
		<!-- Footer -->
		<div th:replace="admin/fragments/footer :: footer"></div>
		<!-- End Footer -->
	</div>
	</div>

	<!-- Core JS Files -->
	<div th:replace="admin/fragments/script :: script"></div>
	<!-- End JS -->
</body>

</html>