<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->

<div class="container-fluid" th:fragment="header"
	style="position: fixed; top: 0; left: 0; max-width: 100%; height: 125px; z-index: 2000; background-color: white; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);">
	<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
		<defs>
			<symbol xmlns="http://www.w3.org/2000/svg" id="link" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M12 19a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm0-4a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm-5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm7-12h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3Zm1 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9h16Zm0-11H4V6a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V5h8v1a1 1 0 0 0 2 0V5h1a1 1 0 0 1 1 1ZM7 15a1 1 0 1 0-1-1a1 1 0 0 0 1 1Zm0 4a1 1 0 1 0-1-1a1 1 0 0 0 1 1Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="arrow-right" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M17.92 11.62a1 1 0 0 0-.21-.33l-5-5a1 1 0 0 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l5-5a1 1 0 0 0 .21-.33a1 1 0 0 0 0-.76Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="category" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M19 5.5h-6.28l-.32-1a3 3 0 0 0-2.84-2H5a3 3 0 0 0-3 3v13a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-10a3 3 0 0 0-3-3Zm1 13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-13a1 1 0 0 1 1-1h4.56a1 1 0 0 1 .95.68l.54 1.64a1 1 0 0 0 .95.68h7a1 1 0 0 1 1 1Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="calendar" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M19 4h-2V3a1 1 0 0 0-2 0v1H9V3a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3Zm1 15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-7h16Zm0-9H4V7a1 1 0 0 1 1-1h2v1a1 1 0 0 0 2 0V6h6v1a1 1 0 0 0 2 0V6h2a1 1 0 0 1 1 1Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="heart" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M20.16 4.61A6.27 6.27 0 0 0 12 4a6.27 6.27 0 0 0-8.16 9.48l7.45 7.45a1 1 0 0 0 1.42 0l7.45-7.45a6.27 6.27 0 0 0 0-8.87Zm-1.41 7.46L12 18.81l-6.75-6.74a4.28 4.28 0 0 1 3-7.3a4.25 4.25 0 0 1 3 1.25a1 1 0 0 0 1.42 0a4.27 4.27 0 0 1 6 6.05Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="plus" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="minus" viewBox="0 0 24 24">
				<path fill="currentColor" d="M19 11H5a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="cart" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M8.5 19a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 8.5 19ZM19 16H7a1 1 0 0 1 0-2h8.491a3.013 3.013 0 0 0 2.885-2.176l1.585-5.55A1 1 0 0 0 19 5H6.74a3.007 3.007 0 0 0-2.82-2H3a1 1 0 0 0 0 2h.921a1.005 1.005 0 0 1 .962.725l.155.545v.005l1.641 5.742A3 3 0 0 0 7 18h12a1 1 0 0 0 0-2Zm-1.326-9l-1.22 4.274a1.005 1.005 0 0 1-.963.726H8.754l-.255-.892L7.326 7ZM16.5 19a1.5 1.5 0 1 0 1.5 1.5a1.5 1.5 0 0 0-1.5-1.5Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="check" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M18.71 7.21a1 1 0 0 0-1.42 0l-7.45 7.46l-3.13-3.14A1 1 0 1 0 5.29 13l3.84 3.84a1 1 0 0 0 1.42 0l8.16-8.16a1 1 0 0 0 0-1.47Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="trash" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M10 18a1 1 0 0 0 1-1v-6a1 1 0 0 0-2 0v6a1 1 0 0 0 1 1ZM20 6h-4V5a3 3 0 0 0-3-3h-2a3 3 0 0 0-3 3v1H4a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2ZM10 5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1h-4Zm7 14a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V8h10Zm-3-1a1 1 0 0 0 1-1v-6a1 1 0 0 0-2 0v6a1 1 0 0 0 1 1Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="star-outline" viewBox="0 0 15 15">
				<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
					d="M7.5 9.804L5.337 11l.413-2.533L4 6.674l2.418-.37L7.5 4l1.082 2.304l2.418.37l-1.75 1.793L9.663 11L7.5 9.804Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="star-solid" viewBox="0 0 15 15">
				<path fill="currentColor"
					d="M7.953 3.788a.5.5 0 0 0-.906 0L6.08 5.85l-2.154.33a.5.5 0 0 0-.283.843l1.574 1.613l-.373 2.284a.5.5 0 0 0 .736.518l1.92-1.063l1.921 1.063a.5.5 0 0 0 .736-.519l-.373-2.283l1.574-1.613a.5.5 0 0 0-.283-.844L8.921 5.85l-.968-2.062Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="search" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M21.71 20.29L18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 7-7a7 7 0 0 1-7 7Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="user" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M15.71 12.71a6 6 0 1 0-7.42 0a10 10 0 0 0-6.22 8.18a1 1 0 0 0 2 .22a8 8 0 0 1 15.9 0a1 1 0 0 0 1 .89h.11a1 1 0 0 0 .88-1.1a10 10 0 0 0-6.25-8.19ZM12 12a4 4 0 1 1 4-4a4 4 0 0 1-4 4Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="close" viewBox="0 0 15 15">
				<path fill="currentColor"
					d="M7.953 3.788a.5.5 0 0 0-.906 0L6.08 5.85l-2.154.33a.5.5 0 0 0-.283.843l1.574 1.613l-.373 2.284a.5.5 0 0 0 .736.518l1.92-1.063l1.921 1.063a.5.5 0 0 0 .736-.519l-.373-2.283l1.574-1.613a.5.5 0 0 0-.283-.844L8.921 5.85l-.968-2.062Z" />
			</symbol>
		</defs>
	</svg>




	<div class="content-wrapper">
		<div class="row ">
			<div class="col-sm-4 col-lg-3 text-center text-sm-start">
				<div class="main-logo">
					<a th:href="@{/index}">
						<img th:src="@{/fe/images/logo1.png}" style="margin-top: 0px; max-width: 100%;max-height: 100%;"
							alt="logo" class="img-fluid">
					</a>
				</div>
			</div>

			<div class="col-sm-6 offset-sm-2 offset-md-0 col-lg-5 d-none d-lg-block" style="padding-top: 25px;">
				<div class="search-bar row bg-light p-2 my-2 rounded-4">
					<!-- Biểu mẫu tìm kiếm -->
					<form id="search-form" th:action="@{/category/search}" method="get" class="row">
						<!-- Dropdown danh mục -->
						<div class="col-md-4 d-none d-md-block">
							<select class="form-select border-0 bg-transparent" id="categorySelect" name="category">
								<option value="-1" th:selected="${category == -1}" style="font-weight: bold;">Tất cả
									danh mục</option>
								<option th:each="cat : ${categories}" th:value="${cat.maDanhMuc}"
									th:text="${cat.tenDanhMuc}" th:selected="${cat.maDanhMuc == category}"
									style="font-weight: bold;"></option>
							</select>
						</div>
						<div class="col-11 col-md-7">
							<input type="text" name="keyword" class="form-control border-0 bg-transparent"
								placeholder="Tìm kiếm" th:value="${keyword}" />
						</div>
						<div class="col-2 col-md-1">
							<button type="submit" class="btn btn-primary" style=" white-space: nowrap;">Tìm
								kiếm</button>
						</div>
					</form>
				</div>
			</div>

			<div
				class="col-sm-8 col-lg-4 d-flex justify-content-end gap-1 align-items-center mt-3 mt-sm-0 justify-content-center justify-content-sm-end">
				<ul class="d-flex justify-content-end list-unstyled m-0">
					<!-- Nếu người dùng đã đăng nhập thì hiển thị thông tin khách hàng -->
					<li th:if="${#authentication.name != 'anonymousUser'}" class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="javascript:void(0)" id="userDropdown"
							data-bs-toggle="dropdown" aria-expanded="false">

							<img th:src="${currentUser != null and currentUser.avatar != null 
                ? '/upload/' + currentUser.avatar + '?t=' + timestamp 
                : '/fe/images/up/aa.jpg'}" alt="Avatar" class="rounded-circle" width="40" height="40" />


						</a>
						<!-- Dropdown Menu -->
						<ul class="dropdown-menu" aria-labelledby="userDropdown">
							<!--<li>
								<div class="dropdown-item text-center">
									<h5 class="mb-0" th:text="${#authentication.name}">Tên Khách Hàng</h5>
									<span class="badge bg-primary">Khách hàng VIP</span>
								</div>
							</li>-->
							<li>
								<div class="dropdown-divider"></div>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/customer/account}">Thông tin tài khoản</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/customer/logout}">Đăng xuất</a>
							</li>
						</ul>

					</li>

					<!-- Nếu người dùng chưa đăng nhập thì hiển thị đăng nhập và đăng ký -->
					<li th:if="${#authentication.name == 'anonymousUser'}">
						<a th:href="@{/customer/login}" class="btn btn-outline-primary mx-2">Đăng nhập</a>
						<a th:href="@{/customer/register}" class="btn btn-primary">Đăng ký</a>
					</li>

					<!-- Yêu thích -->
					<li>
						<a class="rounded-circle bg-light p-2 mx-1" th:if="${#authentication.name == 'anonymousUser'}"
							data-bs-toggle="offcanvas" data-bs-target="#offcanvasLoginAlert"
							aria-controls="offcanvasLoginAlert">
							<i class="fas fa-heart" style="
						font-size: 1rem;
					    
					     text-align: center;
					     font-size: 1.2rem;
					      
					      "></i>
						</a>
						<a class="rounded-circle bg-light p-2 mx-1" th:if="${#authentication.name != 'anonymousUser'}"
							th:href="@{/customer/favorites}">
							<div style="position: relative; display: inline-block;">
								<i class="fas fa-heart" style="
						font-size: 1rem;
					    
					     text-align: center;
					     font-size: 1.2rem;
					      
					      "></i>
							</div>
						</a>
					</li>


					<!-- Đơn hàng -->
					<li>
						<a class="rounded-circle bg-light p-2 mx-1" th:if="${#authentication.name == 'anonymousUser'}"
							data-bs-toggle="offcanvas" data-bs-target="#offcanvasLoginAlert"
							aria-controls="offcanvasLoginAlert">
							<i class="fas fa-box"></i>
						</a>
						<a class="rounded-circle bg-light p-2 mx-1" th:if="${#authentication.name != 'anonymousUser'}"
							th:href="@{/customer/order}">
							<div style="position: relative; display: inline-block;">
								<i class="fas fa-box"
									style="font-size: 1rem; text-align: center; font-size: 1.2rem;"></i>
							</div>
						</a>
					</li>
					<!-- Hóa đơn Offcanvas -->
					<li>
						<a class="rounded-circle bg-light p-2 mx-1" th:if="${#authentication.name == 'anonymousUser'}"
							data-bs-toggle="offcanvas" data-bs-target="#offcanvasLoginAlert"
							aria-controls="offcanvasLoginAlert">
							<i class="fas fa-file-invoice"
								style="font-size: 1rem; text-align: center; font-size: 1.2rem;"></i>
						</a>
						<a class="rounded-circle bg-light p-2 mx-1" th:if="${#authentication.name != 'anonymousUser'}"
							th:href="@{/customer/hoadon}">
							<div style="position: relative; display: inline-block;">
								<i class="fas fa-file-invoice"
									style="font-size: 1rem; text-align: center; font-size: 1.2rem;"></i>
							</div>
						</a>
					</li>





					<!-- Giỏ hàng Offcanvas -->
					<li>
						<a class="rounded-circle bg-light p-2 mx-1" th:if="${#authentication.name == 'anonymousUser'}"
							data-bs-toggle="offcanvas" data-bs-target="#offcanvasLoginAlert"
							aria-controls="offcanvasLoginAlert">
							<i class="fas fa-shopping-cart" style="
						font-size: 1rem;
					    
					     text-align: center;
					     font-size: 1.2rem;
					      
					      "></i>

						</a>
						<a class="rounded-circle bg-light p-2 mx-1" th:href="@{/customer/cart}"
							th:if="${#authentication.name != 'anonymousUser'}">
							<div style="position: relative; display: inline-block;">
								<i class="fas fa-shopping-cart" style="font-size: 1rem;
					    
					     text-align: center;
					     font-size: 1.2rem;"></i>
								<span id="cart-count" style="
							        position: absolute;
							        top: -13px; /* Điều chỉnh vị trí để khớp với icon */
							        right: -13px;
							        background-color: #ff0000;
							        color: #ffffff;
							        font-size: 0.9rem;
							        width: 1.8em;
							        height: 1.8em;
							        display: flex;
							        align-items: center;
							        justify-content: center;
							        text-align: center;
							        border-radius: 50%;
							    ">
									0
								</span>
							</div>
						</a>


					</li>
				</ul>
				<div th:if="${success}" class="alert alert-success mt-3" role="alert">
					<span th:text="${success}"></span>
				</div>
				<div th:if="${error}" class="alert alert-danger mt-3" role="alert">
					<span th:text="${error}"></span>
				</div>



			</div>


			<!--	<div th:if="${success}" class="alert alert-success mt-3" role="alert">
				<span th:text="${success}"></span>
			</div>
			<div th:if="${error}" class="alert alert-danger mt-3" role="alert">
				<span th:text="${error}"></span>
			</div>-->

			<!-- Các Offcanvas của Đơn hàng, Hộp thư, Giỏ hàng -->
			<!-- Hộp thư Offcanvas -->
			<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasMessages" aria-labelledby="Hộp Thư">
				<div class="offcanvas-header justify-content-center">
					<h5 class="offcanvas-title">Hộp Thư</h5>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<p>Bạn không có tin nhắn mới nào.</p>
				</div>
			</div>

			<!-- Đơn hàng Offcanvas -->
			<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasOrders" aria-labelledby="Đơn hàng của bạn">
				<div class="offcanvas-header justify-content-center">
					<h5 class="offcanvas-title">Đơn Hàng Của Bạn</h5>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<p>Bạn chưa có đơn hàng nào.</p>
				</div>
			</div>

			<!-- Giỏ hàng Offcanvas -->
			<!-- Giỏ hàng Offcanvas -->
			<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCart" aria-labelledby="Giỏ Hàng Của Bạn">
				<div class="offcanvas-header justify-content-center">
					<h5 class="offcanvas-title">Giỏ Hàng Của Bạn</h5>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<div th:if="${cartCount > 0}">
						<ul class="list-group">
							<li th:each="item : ${cartItems}"
								class="list-group-item d-flex justify-content-between align-items-center">
								<span th:text="${item.sanPham.tenSanPham}">Tên Sản Phẩm</span>

								<!-- Ô nhập số lượng -->
								<input type="number" min="1" th:id="'quantity_' + ${item.sanPham.maSanPham}"
									class="form-control quantity-input me-3" th:value="${item.soLuong}"
									th:attr="onchange='updateItemQuantity(' + ${item.sanPham.maSanPham} + ', this.value)'">


								<!-- Giá sản phẩm -->
								<span>Giá: <span th:text="${item.sanPham.donGiaBan}">0</span>₫</span>

								<!-- Nút xóa sản phẩm -->
								<button type="button" class="btn btn-danger btn-sm"
									th:onclick="'removeItemFromCart(' + ${item.sanPham.maSanPham} + ')'">Xóa</button>
							</li>
						</ul>
						<div class="text-center mt-4">
							<a th:href="@{/customer/cart}" class="btn btn-primary">Xem chi tiết giỏ hàng</a>
						</div>
					</div>
					<div th:if="${cartCount == 0}">
						<p>Giỏ hàng của bạn đang trống.</p>
					</div>
				</div>


			</div>




			<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasLoginAlert"
				aria-labelledby="Thông báo đăng nhập">
				<div class="offcanvas-header justify-content-center">
					<h5 class="offcanvas-title">Bạn cần đăng nhập để xem</h5>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<p>Vui lòng đăng nhập để sử dụng tính năng này.</p>
					<div class="text-center mt-4">
						<a th:href="@{/customer/login}" class="btn btn-primary">Đăng nhập</a>
					</div>
				</div>
			</div>


		</div>






	</div>




	<!-- Sub-header nằm ngay bên dưới -->
	<div
		style="position: fixed; text-align: center; left: 0; width: 100%; height: 45px; z-index: 200; padding-top: 10px; background-color: #ffffff;">

		<a th:href="@{/brands/all}" style="
    color: black; 
    font-weight: bold; 
    display: inline-block; 
    text-decoration: underline; 
    text-decoration-color: transparent; 
    text-underline-offset: 3px; 
    transition: text-decoration-color 0.3s;
  " onmouseover="this.style.textDecorationColor='black';" onmouseout="this.style.textDecorationColor='transparent';">
			THƯƠNG HIỆU
		</a>

	</div>

</div>